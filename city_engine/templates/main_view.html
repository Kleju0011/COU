{% extends 'base_city.html' %}
{% load staticfiles %}

{% block script %}
{% endblock %}

{% block title %}Miasto {{ city.name }}{% endblock %}

{% block content %}

{% if request.user.is_authenticated %}
    <p>Witaj, {{ request.user.username }}!</p>
    <p><a href="{% url 'player:logout' %}">Wyloguj</a></p>
                    {% else %}
    <p><a href="{% url 'player:login' %}">Zaloguj</a></p>
    {% endif %}

<p>Miasto: {{ city.name }}</p>
<p>Pieniądze: {{ city.cash }}</p>
<p>Masa: {{ city.mass }}</p>
<p>Koszty utrzymania: {{ total_cost_of_maintenance }}</p>

<p>Obecna populacja {{ current_population }}/{{ max_population }}</p>

<h1>Statystyki</h1>
<table class="table">
    <thead>
        <tr>
            <th></th>
            <th>Energia</th>
            <th>Surowa Woda</th>
            <th>Oczyszczona Woda</th>
        </tr>
    </thead>
    <tbody>
        {% for resources in city_resources_stats %}
            <tr>
                {% for stats in resources %}
                <th>{{ stats }}</th>
                {% endfor %}
            </tr>
        {% endfor %}
    </tbody>
</table>

<p>{{ profile.current_turn }}/12</p>
{% if city.cash > 0 %}
    {% if profile.current_turn <= 11 %}
        <button><a href="{% url 'city_engine:turn_calculations' %}">Kolejna tura</a></button>
{% endif %}
{% endif %}

{% if city.cash <= 0 %}
<h1>BANKRUT</h1>
{% endif %}

<p>Zapotrzebowanie na strefy mieszkalne: {{ home_demands }}</p>
<p>Zapotrzebowanie na strefy przemysłowe: {{ industial_demands }}</p>
<p>Zapotrzebowanie na strefy handlowe: {{ trade_demands }}</p>

{% if buildings %}
<h1><b>Lista budynków</b></h1>
<table class="table">
    <thead>
        <tr>
            <th>Nazwa</th>
        </tr>
    </thead>
    <tbody>
    {% for name in buildings %}
        <tr>
            <th>{{ name }}</th>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endif %}

{% if buildings_under_construction %}
<p><b>Lista budynków w budowie</b></p>
<table class="table">
    <thead>
        <tr>
            <th>Budowa</th>
            <th>Czas</th>
        </tr>
    </thead>
    <tbody>
    {% for name, start, end in buildings_under_construction %}
        <tr>
            <th>{{ name }}</th>
            <th>{{ start }}/{{ end }}</th>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endif %}

<table class="table">
    <thead>
        <tr>
            <th>Imię</th>
            <th>Nazwisko</th>
        </tr>
    </thead>
    <tbody>
    {% for c in citizen %}
    <tr>
        <th>{{ c.name }}</th>
        <th>{{ c.surname }}</th>
        <th>{{ c.sex }}</th>
    </tr>
    {% endfor %}
    </tbody>
</table>

{{ msg }}

<button class="hex-change">Zmień hexy</button>

<button class="buildingToHide" name="BudynkiElektryczne">Elektrownie</button>
<div class="buildingsToBuild">
    <button class="setBuilding" name="WindPlant">Elektrownia wiatrowa</button>
    <button class="setBuilding" name="RopePlant">Elektrownia na ropę</button>
    <button class="setBuilding" name="CoalPlant">Elektrownia na węgiel</button>
</div>

<button class="setBuilding" name="WaterTower">Wieża ciśnień</button>
<button class="setBuilding" name="Residential">Dzielnica mieszkalna</button>
<button class="setBuilding" name="ProductionBuilding">Dzielnica przemysłowa</button>
<button class="setBuilding" name="DumpingGround">Wysypisko śmieci</button>
<button class="setBuilding" name="SewageWorks">Oczyszczalnia ścieków</button>

<button class="buildingToHide" name="Farmy">Farmy</button>
<div class="buildingsToBuild">
    <button class="setBuilding" name="PotatoFarm">Farma ziemniaków</button>
    <button class="setBuilding" name="BeanFarm">Farma fasoli</button>
    <button class="setBuilding" name="LettuceFarm">Farma sałaty</button>
    <button class="setBuilding" name="CattleFarm">Farma bydła</button>
</div>
<button class="setBuilding" name="MassConventer">Konwenter Masy</button>
<button class="setBuilding" name="TradeDistrict">Strefa Handlowa</button>
<button class="setBuilding" name="PrimarySchool">Szkoła podstawowa</button>



<div id="result"></div>

<div id="board">
    <h1>Plansza wygenerowana z Djagno</h1>
    {{ hex_table }}
</div>


<div id="hexInfoBox">
    <h1>Podgląd hexa</h1>
    {{ hex_detail_info_table }}
</div>

{% endblock %}

{% block jsScript %}
    <script src="{% static 'js/hex_events.js' %}"></script>
{% endblock %}