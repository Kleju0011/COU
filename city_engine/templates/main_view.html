{% extends 'base_city.html' %}
{% load staticfiles %}

{% block script %}
{% endblock %}

{% block title %}Miasto {{ city.name }}{% endblock %}

{% block content %}

{% if request.user.is_authenticated %}
    <p>Witaj, {{ request.user.username }}!</p>
    <p><a href="{% url 'player:logout' %}">Wyloguj</a></p>
                    {% else %}
    <p><a href="{% url 'player:login' %}">Zaloguj</a></p>
    {% endif %}

<p>Miasto: {{ city.name }}</p>
<p>Pieniądze: {{ city.cash }}</p>
<p>Energia: {{ energy_bilans }}/{{ energy }}</p>
<p>Woda: {{ water }}</p>
<p>Koszty utrzymania: {{ total_cost_of_maintenance }}</p>
<p>{{ profile.current_turn }}/12</p>
{% if profile.current_turn <= 11 %}
    <button><a href="{% url 'city_engine:turn_calculations' %}">Kolejna tura</a></button>
{% endif %}

{% if buildings %}
<h1><b>Lista budynków</b></h1>
<table>
    <thead>
        <tr>
            <th>Nazwa</th>
        </tr>
    </thead>
    <tbody>
    {% for name in buildings %}
        <tr>
            <th>{{ name }}</th>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endif %}

{% if buildings_under_construction %}
<p><b>Lista budynków w budowie</b></p>
<table>
    <thead>
        <tr>
            <th>Budowa</th>
            <th>Czas</th>
        </tr>
    </thead>
    <tbody>
    {% for name, start, end in buildings_under_construction %}
        <tr>
            <th>{{ name }}</th>
            <th>{{ start }}/{{ end }}</th>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endif %}

<button class="hex-change">Zmień hexy</button>

<button class="buildingToHide" name="Budynki_elektryczne">Elektrownie</button>
<div class="buildingsToBuild">
    <button class="setBuilding" name="WindPlant">Elektrownia wiatrowa</button>
    <button class="setBuilding" name="RopePlant">Elektrownia na ropę</button>
    <button class="setBuilding" name="CoalPlant">Elektrownia na węgiel</button>
</div>

<button class="buildingToHide" name='Wodociagi'>Wodociągi</button>
<div class="buildingsToBuild">
    <button class="setBuilding" name="WaterTower">Wieża ciśnień</button>
</div>

<div id="board">
    <h1>Plansza wygenerowana z Djagno</h1>
    {{ hex_table }}
</div>


<div id="hexInfoBox">
    <h1>Podgląd hexa</h1>
    {{ hex_detail_info_table }}
</div>

{% endblock %}

{% block jsScript %}
    <script src="{% static 'js/hex_events.js' %}"></script>
{% endblock %}